name: auto pr

on:
    push:
        branches: ['frappedia']

jobs:
    linux-cache:
      uses: ./.github/workflows/cmake_cache_linux_x64.yml
      with: 
        build_type: retail
    windows-cache:
      uses: ./.github/workflows/cmake_cache_windows_x64.yml
      with: 
        build_type: retail
    windows-32-bit-cache:
      uses: ./.github/workflows/cmake_cache_windows_x86.yml
      with: 
        build_type: retail
    autopr:
        runs-on: ubuntu-latest
        steps:
            - name: pull repo
              uses: actions/checkout@v5
              with:
                ref: frappedia
            - name: autopr
              working-directory: ${{ github.workspace }}
              run: gh pr create -B master -H frappedia --title 'Merge latest commit by the Admin' --body 'Automatic'
              env:
                    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
